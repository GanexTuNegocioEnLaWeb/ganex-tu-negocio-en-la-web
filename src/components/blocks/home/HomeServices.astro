---
import { t } from "../../../lib/i18n";
import { Icon } from "astro-icon/components";
const { i18n = {}, lang = "es" } = Astro.props as {
  i18n?: Record<string, any>;
  lang?: string;
};
const tag = t("home.services.tag", i18n);
const titlePre = t("home.services.title_pre", i18n);
const titleHighlight = t("home.services.title_highlight", i18n);
const titlePost = t("home.services.title_post", i18n);
const desc = t("home.services.desc", i18n);
const more = t("home.services.more", i18n);
const services =
  (t("home.services.items", i18n) as Array<{
    title: string;
    slug: string;
    description: string;
    icon?: string;
  }>) ?? [];
const sectionId = t("nav.services_id", i18n);
---

<section id={sectionId} class="relative py-24 bg-neutral-50 overflow-hidden">
  <!-- Background Wave Pattern (Simulating Wavify) -->
  <div class="absolute inset-0 opacity-10 pointer-events-none z-0">
    <svg
      class="w-full h-full"
      xmlns="http://www.w3.org/2000/svg"
      preserveAspectRatio="none"
      viewBox="0 0 1440 320"
    >
      <path
        fill="#FF8A00"
        fill-opacity="1"
        d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"
      ></path>
    </svg>
  </div>

  <div
    class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-neutral-800 relative z-10"
  >
    <div class="text-center mb-20">
      <span
        class="text-[#FF8A00] font-bold tracking-wider uppercase text-sm bg-orange-100 px-3 py-1 rounded-full"
        >{tag}</span
      >
      <h2 class="text-4xl sm:text-5xl font-extrabold mt-4 mb-6">
        {titlePre}
        <span class="text-[#FF8A00]">{titleHighlight}</span>
        {titlePost}
      </h2>
      <p
        class="text-neutral-600 text-lg sm:text-xl max-w-3xl mx-auto leading-relaxed"
      >
        {desc}
      </p>
    </div>

    <ul class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 lg:gap-10">
      {
        services.map((service) => {
          const href = `/${lang}/${service.slug}`;
          return (
            <li class="h-full group perspective-1000">
              <a
                href={href}
                class="h-full bg-white rounded-3xl p-8 shadow-lg hover:shadow-2xl transition-all duration-500 border border-neutral-100 hover:border-orange-100 hover:-translate-y-2 flex flex-col relative overflow-hidden"
              >
                <div class="absolute top-0 right-0 w-32 h-32 bg-orange-50 rounded-bl-full -mr-8 -mt-8 transition-transform group-hover:scale-150 duration-700 ease-in-out z-0" />

                <div class="relative z-10 w-16 h-16 bg-[#FFF4E5] rounded-2xl flex items-center justify-center mb-8 group-hover:bg-[#FFFFFF] transition-colors duration-300 shadow-sm">
                  {service.icon ? (
                    <Icon
                      name={service.icon}
                      width="28"
                      height="28"
                      color="#FF8A00"
                    />
                  ) : null}
                </div>

                <h3 class="relative z-10 text-2xl font-bold mb-4 text-neutral-800 group-hover:text-[#FF8A00] transition-colors">
                  {service.title}
                </h3>
                <p class="relative z-10 text-neutral-600 leading-relaxed mb-8 flex grow group-hover:text-neutral-700">
                  {service.description}
                </p>

                <div class="relative z-10 flex items-center text-[#FF8A00] font-bold mt-auto group/link">
                  <span class="border-b-2 border-transparent group-hover:border-[#FF8A00] transition-all">
                    {more}
                  </span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5 ml-2 transition-transform duration-300 group-hover/link:translate-x-2"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2.5"
                      d="M17 8l4 4m0 0l-4 4m4-4H3"
                    />
                  </svg>
                </div>
              </a>
            </li>
          );
        })
      }
    </ul>
  </div>

  <div
    class="absolute bottom-0 left-0 w-full overflow-hidden leading-none z-0 rotate-180"
  >
    <svg
      class="relative block w-[calc(100%+1.3px)] h-20"
      data-name="Layer 1"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 1200 120"
      preserveAspectRatio="none"
    >
      <path
        d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"
        fill="#ffffff"></path>
    </svg>
  </div>
</section>
